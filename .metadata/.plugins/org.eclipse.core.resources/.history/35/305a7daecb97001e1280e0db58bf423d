package ch06;

import java.util.Scanner;

public class AutoSeller {
	public static void main(String[] args) {
		Scanner in = new Scanner(System.in);
		final int ACCESS_CODE = 3917;
		boolean isFirstStart = true, loginProcess = false;
		String[][] idArray = new String[10][2];
		String checkPass = "";
		int selectMode = 0;
		int runProcess = 1;
		while(isFirstStart) {
			System.out.println("자판기 관리 시스템을 시작합니다.");
			System.out.println("최초 사용자 등록이 필요합니다.");
			accountGenerator(idArray);
			isFirstStart = false;
			}
			
		while(runProcess == 1) {
			// Administor Login
			loginProcess = accountLogin(idArray);
			System.out.println(loginProcess);
			while (loginProcess) {
				
			}
		}
		
		
			
			
			
		
		
			
			
		}
	
	
	public static String[][] accountGenerator(String[][] idArray){
		Scanner in = new Scanner(System.in);
		boolean accountCreate = false;
		int count = 0;
		for (int i = 0; i < idArray.length ; i ++) {
			if (idArray[i][0]==null || idArray[i][0].isEmpty() || idArray[i][0].isBlank()) {
				count++;
			}
		}
		System.out.printf("현재 등록 가능한 관리자 계정은 %d개입니다.\n",count);
		for (int i = 0 ; i < idArray.length ; i ++) {
			if (idArray[i][0]==null ||idArray[i][0].isEmpty() || idArray[i][0].isBlank()) {
				System.out.println("사용할 ID릅 입력하세요");
				System.out.print(">>> ");
				idArray[i][0] = in.next();
				boolean checkProcess = true;
				do {
				
				System.out.println("사용할 PASSWORD릅 입력하세요");
				System.out.print(">>> ");
				String checkPass = in.next();
				System.out.println("PASSWORD릅 한번 더 입력하세요");
				System.out.print(">>> ");
				String tmp = in.next();
				
				if (tmp.equals(checkPass)) {
					idArray[i][1] = checkPass;
					checkProcess = false;
					accountCreate = true;
					break;
				} else {
					System.out.println("비밀번호가 일치하지 않습니다. 다시 입력해주세요.");
				}
				} while (checkProcess);
			}
			if(accountCreate) {
				System.out.println("사용자 등록을 완료하였습니다. 로그인 해주세요.");
				break;
				}
			
		}
	return idArray;
	}

	public static boolean accountLogin(String[][] idArray) {
		boolean isLogin = false, result = false;
		Scanner in = new Scanner(System.in);
		int count = 0 ;
		String checkPASS ="";
		do {
			
			System.out.println("ID를 입력하세요");
			System.out.print(">>> ");
			String checkID = in.next();
			
			for (int i = 0; i<idArray.length ; i ++ ) {
				if(idArray[i][0] == checkID) {
					do {
						System.out.println("PASSWORD를 입력하세요.");
						System.out.print(">>> ");
						checkPASS = in.next();
						count++;
						if (checkID == idArray[i][0] && checkPASS == idArray[i][1]) {
							result = true;
						}
					} while (checkPASS == idArray[i][1]);
					
					break;
				}
			}
			count++;
			
			
		} while (!isLogin && count < 10);
		
	return result;
	}
}