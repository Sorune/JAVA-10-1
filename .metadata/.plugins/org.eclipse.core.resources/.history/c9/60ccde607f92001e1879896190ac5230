package ch05;

import java.util.*;

public class Game {
	public static class Player {
		int hp = 100;
		int action = 0;
		int attackDmg = 10;
	}
	
	public static void main(String[] args) {
		
		Scanner in = new Scanner(System.in);
		String keepGoing = "y";
		while (keepGoing.equals("y")) {
			Player player1 = new Player();
			Player player2 = new Player();
			
			System.out.println("--------------------------------");
			System.out.println("게임을 시작합니다.");
			System.out.println("--------------------------------");
			while (!(player1.hp < 0 || player2.hp < 0)) {
				System.out.println("-----------------------------------");
				System.out.println("player1의 차례입니다.");
				System.out.println("행동을 결정해주세요");
				System.out.println("1. 공격 \t 2. 방어 \t 3. 아무행동도 하지 않음");
				System.out.println("-----------------------------------");
				System.out.print(">>> ");
				player1.action = in.nextInt();
				
				System.out.println("-----------------------------------");
				System.out.println("player2의 차례입니다.");
				System.out.println("행동을 결정해주세요");
				System.out.println("1. 공격 \t 2. 방어 \t 3. 아무행동도 하지 않음");
				System.out.println("-----------------------------------");
				System.out.print(">>> ");
				player2.action = in.nextInt();
				
				if (player1.action == 2) {
					System.out.println("player1이 공격 방어에 성공하였습니다.");
				} else if (player1.action != 2 && player2.action == 1) {
					System.out.println("player1이 공격당했습니다.");
					player1.hp -= player2.attackDmg;
					System.out.printf("player1의 남은 체력은 %d입니다.\n",player1.hp);
				} else if (player2.action == 2) {
					System.out.println("player2이 공격 방어에 성공하였습니다.");
				} else if (player2.action != 2 && player1.action == 1) {
					System.out.println("player2이 공격당했습니다.");
					player2.hp -= player1.attackDmg;
					System.out.printf("player2의 남은 체력은 %d입니다.\n",player2.hp);
				}
				
			}
			if (player1.hp > player2.hp) {
				System.out.println("player1 승리!");
			} else if (player2.hp > player1.hp) {
				System.out.println("player2 승리!");
			}
			System.out.println("계속하시겠습니까? 계속하시려면 y를 눌러주세요");
			keepGoing = in.next();
		}
	}
}
